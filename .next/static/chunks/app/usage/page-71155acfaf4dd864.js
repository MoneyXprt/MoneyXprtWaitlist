(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[956],{4413:function(e,t,s){Promise.resolve().then(s.bind(s,7604))},7604:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),r=s(2265),n=s(9376),l=s(3303),i=s(7383);let c=e=>{if(!e)return 0;let t=parseInt(e);return isNaN(t)?0:t};function d(){let{user:e,loading:t}=(0,i.k)(),s=(0,n.useRouter)(),[d,o]=(0,r.useState)([]),[x,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null);async function p(){if(e)try{let{data:t,error:s}=await l.OQ.from("usage_daily").select("*").eq("user_id",e.id).order("day",{ascending:!1}).limit(30);if(s)throw s;let a=t||[];o(a);let r=new Date().toISOString().split("T")[0],n=a.find(e=>e.day===r);h(n||null)}catch(e){console.error("Failed to fetch usage:",e)}finally{u(!1)}}if((0,r.useEffect)(()=>{if(!t&&!e){s.replace("/login");return}e&&p()},[e,t,s]),t||x)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading usage data..."})]})});if(!e)return null;let g=(null==m?void 0:m.prompts)?c(m.prompts):0,y=Math.min(g/50*100,100);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>s.back(),className:"text-gray-600 hover:text-gray-900",children:"← Back"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Usage Statistics"})]}),(0,a.jsx)("button",{onClick:()=>s.push("/dashboard"),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Dashboard"})]})})}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Today's Usage"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-emerald-600",children:g}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"AI Requests"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:((null==m?void 0:m.tokensIn)?c(m.tokensIn):0).toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Input Tokens"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:((null==m?void 0:m.tokensOut)?c(m.tokensOut):0).toLocaleString()}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Output Tokens"})]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-300 ".concat(y>=90?"bg-red-600":y>=70?"bg-yellow-600":"bg-emerald-600"),style:{width:"".concat(y,"%")}})}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:[g," / 50 daily requests"]}),(0,a.jsxs)("span",{children:[Math.round(y),"% used"]})]}),y>=90&&(0,a.jsx)("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800 text-sm",children:"⚠️ You're approaching your daily limit. Consider upgrading for unlimited access."})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Usage History (Last 30 Days)"})}),0===d.length?(0,a.jsx)("div",{className:"p-6 text-center text-gray-500",children:"No usage data available yet. Start asking MoneyXprt questions to see your usage statistics!"}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requests"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Input Tokens"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Output Tokens"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Tokens"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>{let t=c(e.tokensIn),s=c(e.tokensOut);return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.day).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.prompts}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.toLocaleString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(t+s).toLocaleString()})]},e.day)})})]})})]})]})]})}},3303:function(e,t,s){"use strict";s.d(t,{OQ:function(){return r}});var a=s(8439);s(257);let r=(0,a.eI)("https://ayeckgcillxfivvnyhaj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5ZWNrZ2NpbGx4Zml2dm55aGFqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwNjcxODgsImV4cCI6MjA2ODY0MzE4OH0.5l4EufR-n8izghE5DTbWsweGU_a8im5J4GUnPpiPGTo")},7383:function(e,t,s){"use strict";s.d(t,{k:function(){return n}});var a=s(2265),r=s(3303);function n(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=!0;(async function(){try{let{data:{session:a}}=await r.OQ.auth.getSession();if(e){var s;t(null!==(s=null==a?void 0:a.user)&&void 0!==s?s:null),n(!1)}}catch(s){console.error("Error getting session:",s),e&&(t(null),n(!1))}})();let{data:{subscription:s}}=r.OQ.auth.onAuthStateChange((s,a)=>{if(e){var r;t(null!==(r=null==a?void 0:a.user)&&void 0!==r?r:null),n(!1)}});return()=>{e=!1,s.unsubscribe()}},[]),{user:e,loading:s}}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[439,971,117,744],function(){return e(e.s=4413)}),_N_E=e.O()}]);