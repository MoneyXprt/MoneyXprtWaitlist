(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{5699:function(e,t,s){Promise.resolve().then(s.bind(s,1685))},1685:function(e,t,s){"use strict";s.d(t,{default:function(){return d}});var a=s(7437),l=s(2990),n=s(2265),r=s(9376);function d(){let e=(0,r.useRouter)(),[t]=(0,n.useState)(()=>(0,l.createBrowserClient)("http://localhost:54321","dummy-key")),[s,d]=(0,n.useState)(!1),[u,i]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[m,p]=(0,n.useState)(null),[h,x]=(0,n.useState)(null),[w,f]=(0,n.useState)(!1);async function b(s){if(s.preventDefault(),x(null),p(null),u.length<8){x("Password must be at least 8 characters.");return}if(u!==o){x("Passwords do not match.");return}f(!0);let{error:a}=await t.auth.updateUser({password:u});f(!1),a?x(a.message):(p("Password updated. Redirecting to the app…"),setTimeout(()=>e.replace("/app"),1200))}return(0,n.useEffect)(()=>{(async()=>{let{error:e}=await t.auth.exchangeCodeForSession(window.location.href);e?x(e.message):d(!0)})()},[t]),(0,a.jsx)("div",{className:"min-h-[60vh] grid place-items-center px-6",children:(0,a.jsxs)("div",{className:"w-full max-w-md rounded-2xl border p-6 bg-white shadow-sm",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Set a new password"}),s?(0,a.jsxs)("form",{onSubmit:b,className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"New password"}),(0,a.jsx)("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2",value:u,onChange:e=>i(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Confirm password"}),(0,a.jsx)("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2",value:o,onChange:e=>c(e.target.value)})]}),h&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:h}),m&&(0,a.jsx)("p",{className:"text-sm text-green-600",children:m}),(0,a.jsx)("button",{type:"submit",disabled:!s||w,className:"w-full rounded-lg bg-[hsl(157_48%_25%)] text-white py-2 disabled:opacity-50",children:w?"Saving…":"Update password"})]}):(0,a.jsx)("p",{className:"mt-3 text-sm text-neutral-600",children:"Validating your reset link…"})]})})}}},function(e){e.O(0,[439,549,971,117,744],function(){return e(e.s=5699)}),_N_E=e.O()}]);