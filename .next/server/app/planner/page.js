(()=>{var e={};e.id=136,e.ids=[136],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},1302:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(7586),s(3976),s(6083),s(5866);var a=s(3191),n=s(8716),l=s(7922),r=s.n(l),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["planner",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7586)),"/Users/ianjoachim/Documents/GitHub/MoneyXprt/app/planner/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3976)),"/Users/ianjoachim/Documents/GitHub/MoneyXprt/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,6083)),"/Users/ianjoachim/Documents/GitHub/MoneyXprt/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ianjoachim/Documents/GitHub/MoneyXprt/app/planner/page.tsx"],u="/planner/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/planner/page",pathname:"/planner",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6514:(e,t,s)=>{Promise.resolve().then(s.bind(s,4248))},4248:(e,t,s)=>{"use strict";s.d(t,{default:()=>er});var a=s(326),n=s(7577);let l={firstName:"",lastName:"",email:"",state:"",residency:[],salary:0,bonus:0,selfEmployment:0,rsuVesting:0,k1Active:0,k1Passive:0,otherIncome:0,rentNOI:0,fixedMonthlySpend:0,lifestyleMonthlySpend:0,savingsMonthly:0,cash:0,brokerage:0,retirement:0,hsa:0,crypto:0,properties:[],alts:{privateEquityVC:0,collectibles:0,other:0},mortgageDebt:0,studentLoans:0,autoLoans:0,creditCards:0,otherDebt:0,filingStatus:"single",itemizeLikely:!1,charitableInclination:!1,entityOrSideBiz:!1,hasDisability:!1,hasTermLife:!1,hasUmbrella:!1,hasWillOrTrust:!1,hasPensionOrDeferredComp:!1,expectsInheritance:!1,givingIntent:!1,emergencyFundMonths:3,targetRetireIncomeMonthly:0,targetRetireAge:65,usingRothBackdoor:!1,usingMegaBackdoor:!1,concentrationRisk:!1,discovery:void 0,goals5y:[],goals20y:[],freedomDef:"",confidence:5,w2BaseAnnual:0,bonusPlanAnnual:0,bonusYTD:0,rsu:{eligible:!1,ticker:"",ytdVestedValue:0,yearVestingTotal:0,schedule:[]},espp:{eligible:!1,discountPercent:0,contributionPercent:0,purchaseMonths:[]},deferredComp:{eligible:!1},deferred:[]},r=["single","married_joint","married_separate","head"];function i({value:e,onChange:t,onNext:s,onBack:n}){let l=s=>t({...e,...s}),i=(t,s)=>{let a=[...e.residency??[]],n=a[t]??{state:"",startDate:""};a[t]={...n,...s},l({residency:a})},d=t=>{let s=[...e.residency??[]];s.splice(t,1),l({residency:s})},c=(t,s)=>{let a=(e.residency??[]).map((e,a)=>({...e,primary:s&&a===t}));l({residency:a});let n=a[t];s&&n?.state&&l({state:n.state})};return(0,a.jsxs)("section",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Profile & Residency"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Light profile (no sensitive PII). Residency helps the 50-state tax engine pick the right rules."}),(0,a.jsxs)("div",{className:"rounded border p-4 grid md:grid-cols-3 gap-4",children:[a.jsx(o,{label:"First name (optional)",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",type:"text",value:e.firstName??"",onChange:e=>l({firstName:e.target.value}),placeholder:"e.g., Alex"})}),a.jsx(o,{label:"Last name (optional)",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",type:"text",value:e.lastName??"",onChange:e=>l({lastName:e.target.value}),placeholder:"e.g., Morgan"})}),a.jsx(o,{label:"Email (optional)",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",type:"email",value:e.email??"",onChange:e=>l({email:e.target.value}),placeholder:"you@example.com"})}),a.jsx(o,{label:"Filing status",children:a.jsx("select",{className:"w-full border rounded px-3 py-2",value:e.filingStatus,onChange:e=>l({filingStatus:e.target.value}),children:r.map(e=>a.jsx("option",{value:e,children:function(e){switch(e){case"single":return"Single";case"married_joint":return"Married filing jointly";case"married_separate":return"Married filing separately";case"head":return"Head of household";default:return e}}(e)},e))})}),(0,a.jsxs)(o,{label:"Domicile / current state",children:[a.jsx("input",{className:"w-full border rounded px-3 py-2",type:"text",value:e.state??"",onChange:e=>l({state:e.target.value}),placeholder:"e.g., CA, NY, TX"}),(0,a.jsxs)("p",{className:"text-[12px] text-gray-500 mt-1",children:["This mirrors the row you mark as ",a.jsx("em",{children:"Primary"})," in the residency list below."]})]})]}),(0,a.jsxs)("div",{className:"rounded border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-medium",children:"Residency history (this tax year)"}),a.jsx("button",{type:"button",className:"text-sm rounded border px-3 py-1 hover:bg-gray-50",onClick:()=>{l({residency:[...e.residency??[],{state:"",startDate:"",endDate:"",primary:!1}]})},children:"+ Add state period"})]}),0===(e.residency??[]).length?a.jsx("p",{className:"text-sm text-gray-600",children:"Add any states you lived in this year (helpful for part-year / multi-state filing)."}):a.jsx("div",{className:"space-y-3",children:(e.residency??[]).map((e,t)=>(0,a.jsxs)("div",{className:"grid md:grid-cols-5 gap-3 items-end border rounded p-3",children:[a.jsx(o,{label:"State",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",value:e.state??"",onChange:e=>i(t,{state:e.target.value}),placeholder:"e.g., CA"})}),a.jsx(o,{label:"Start date",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",type:"date",value:e.startDate??"",onChange:e=>i(t,{startDate:e.target.value})})}),a.jsx(o,{label:"End date (optional)",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",type:"date",value:e.endDate??"",onChange:e=>i(t,{endDate:e.target.value})})}),a.jsx(o,{label:"Primary?",children:(0,a.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:String(!!e.primary),onChange:e=>c(t,"true"===e.target.value),children:[a.jsx("option",{value:"false",children:"No"}),a.jsx("option",{value:"true",children:"Yes"})]})}),a.jsx("div",{className:"flex md:justify-end",children:a.jsx("button",{type:"button",className:"text-sm rounded border px-3 py-2 hover:bg-gray-50",onClick:()=>d(t),children:"Remove"})})]},t))})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("button",{type:"button",className:"rounded border px-4 py-2",onClick:n,children:"Back"}),a.jsx("button",{type:"button",className:"inline-flex px-4 py-2 rounded bg-black text-white",onClick:s,children:"Continue"})]})]})}function o({label:e,children:t}){return(0,a.jsxs)("label",{className:"block text-sm",children:[a.jsx("span",{className:"block font-medium mb-1",children:e}),t]})}let d=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}];function c({value:e,onChange:t,onNext:s,onBack:n}){let l=s=>t({...e,...s}),r=e.deferredComp??{eligible:!1,electedPercent:0},i=e.rsu??{yearVestingTotal:0},o=e.espp??{eligible:!1},c=Number(e.bonus)||0,x=Number(e.bonusYTD)||0,g=Math.max(0,c-x);return(0,a.jsxs)("section",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Compensation (Full-Year & YTD)"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Enter full-year expected amounts and what’s happened year-to-date. We’ll use this to generate mid-year actions (e.g., bonus planning)."}),(0,a.jsxs)("div",{className:"rounded border p-4 space-y-3",children:[a.jsx("h3",{className:"font-medium",children:"W-2 & Cash Bonuses"}),a.jsx(u,{label:"W-2 Base salary (annual)",tip:"Your base pay before bonuses.",children:a.jsx(m,{value:Number(e.salary)||0,onChange:e=>l({salary:e})})}),a.jsx(u,{label:"Cash bonuses (annual plan)",tip:"Total expected cash bonuses this year (sign-on, performance, retention).",children:a.jsx(m,{value:c,onChange:e=>l({bonus:e})})}),a.jsx(u,{label:"Cash bonuses (YTD received)",tip:"Cash bonuses already received this year.",children:a.jsx(m,{value:x,onChange:e=>l({bonusYTD:e})})}),(0,a.jsxs)(h,{children:["Planned: $",c.toLocaleString()," \xb7 YTD: $",x.toLocaleString()," \xb7 Remaining: $",g.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"rounded border p-4 space-y-3",children:[a.jsx("h3",{className:"font-medium",children:"Deferred Compensation"}),a.jsx(u,{label:"Eligible?",tip:"Plans that let you defer current income to a future payout (reduces current taxable income).",children:a.jsx(p,{value:!!r.eligible,onChange:e=>l({deferredComp:{...r,eligible:e}})})}),!!r.eligible&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u,{label:"Elected % of eligible pay",children:a.jsx(m,{value:Number(r.electedPercent)||0,onChange:e=>l({deferredComp:{...r,electedPercent:e,eligible:!0}})})}),a.jsx(u,{label:"Company match % (if any)",children:a.jsx(m,{value:Number(r.companyMatchPercent)||0,onChange:e=>l({deferredComp:{...r,companyMatchPercent:e}})})}),a.jsx(u,{label:"Distribution style",children:(0,a.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:r.distribution??"",onChange:e=>l({deferredComp:{...r,distribution:e.target.value||void 0}}),children:[a.jsx("option",{value:"",children:"Select…"}),a.jsx("option",{value:"lump",children:"Lump sum"}),a.jsx("option",{value:"schedule",children:"Installments / schedule"})]})}),a.jsx(u,{label:"First payout year (if known)",children:a.jsx(m,{value:Number(r.firstPayoutYear)||0,onChange:e=>l({deferredComp:{...r,firstPayoutYear:e||void 0}})})})]})]}),(0,a.jsxs)("div",{className:"rounded border p-4 space-y-3",children:[a.jsx("h3",{className:"font-medium",children:"Equity — RSU & ESPP"}),a.jsx(u,{label:"RSU eligible?",tip:"RSU = Restricted Stock Units (taxed as they vest).",children:a.jsx(p,{value:!!i.eligible,onChange:e=>l({rsu:{...i,eligible:e,yearVestingTotal:i.yearVestingTotal}})})}),!!i.eligible&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u,{label:"Company ticker (optional)",children:a.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"e.g., AAPL",value:i.ticker??"",onChange:e=>l({rsu:{...i,ticker:e.target.value.toUpperCase(),yearVestingTotal:i.yearVestingTotal}})})}),a.jsx(u,{label:"RSU vesting (YTD $)",children:a.jsx(m,{value:Number(i.ytdVestedValue)||0,onChange:e=>l({rsu:{...i,ytdVestedValue:e,yearVestingTotal:i.yearVestingTotal}})})}),a.jsx(u,{label:"RSU vesting (expected total this year $)",children:a.jsx(m,{value:Number(i.yearVestingTotal)||0,onChange:e=>l({rsuVesting:e,rsu:{...i,yearVestingTotal:e}})})})]}),a.jsx(u,{label:"ESPP eligible?",tip:"ESPP = Employee Stock Purchase Plan; buy company stock via payroll at a discount.",children:a.jsx(p,{value:!!o.eligible,onChange:e=>l({espp:{...o,eligible:e}})})}),!!o.eligible&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(u,{label:"Discount %",children:a.jsx(m,{value:Number(o.discountPercent)||0,onChange:e=>l({espp:{...o,discountPercent:e,eligible:o.eligible}})})}),a.jsx(u,{label:"Contribution % (payroll)",children:a.jsx(m,{value:Number(o.contributionPercent)||0,onChange:e=>l({espp:{...o,contributionPercent:e,eligible:o.eligible}})})}),a.jsx(u,{label:"Purchase months",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(({label:e,value:t})=>{let s=!!Array.isArray(o.purchaseMonths)&&o.purchaseMonths.includes(t);return a.jsx("button",{type:"button",className:`px-2 py-1 rounded border text-sm ${s?"bg-black text-white":""}`,onClick:()=>{let e=new Set(Array.isArray(o.purchaseMonths)?o.purchaseMonths:[]);e.has(t)?e.delete(t):e.add(t),l({espp:{...o,purchaseMonths:Array.from(e)}})},children:e},t)})})})]})]}),(0,a.jsxs)("div",{className:"rounded border p-4 space-y-3",children:[a.jsx("h3",{className:"font-medium",children:"Other Income"}),a.jsx(u,{label:"Self-employment (annual)",children:a.jsx(m,{value:Number(e.selfEmployment)||0,onChange:e=>l({selfEmployment:e})})}),a.jsx(u,{label:"K-1 (active)",children:a.jsx(m,{value:Number(e.k1Active)||0,onChange:e=>l({k1Active:e})})}),a.jsx(u,{label:"K-1 (passive)",children:a.jsx(m,{value:Number(e.k1Passive)||0,onChange:e=>l({k1Passive:e})})}),a.jsx(u,{label:"Other income (interest/dividends, annual)",children:a.jsx(m,{value:Number(e.otherIncome)||0,onChange:e=>l({otherIncome:e})})}),a.jsx(u,{label:"Rental NOI (annual)",tip:"Net operating income from rentals (income minus operating expenses).",children:a.jsx(m,{value:Number(e.rentNOI)||0,onChange:e=>l({rentNOI:e})})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("button",{type:"button",className:"rounded border px-4 py-2",onClick:n,children:"Back"}),a.jsx("button",{type:"button",className:"inline-flex px-4 py-2 rounded bg-black text-white",onClick:s,children:"Continue"})]})]})}function u({label:e,tip:t,children:s}){return(0,a.jsxs)("label",{className:"block text-sm",children:[(0,a.jsxs)("span",{className:"block font-medium mb-1",children:[e," ",t&&(0,a.jsxs)("span",{className:"ml-2 text-gray-500",children:["(",t,")"]})]}),s]})}function h({children:e}){return a.jsx("p",{className:"text-xs text-gray-600",children:e})}function m({value:e,onChange:t}){return a.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:Number.isFinite(e)?e:"",onChange:e=>{let s=""===e.target.value?0:parseFloat(e.target.value);t(Number.isNaN(s)?0:s)}})}function p({value:e,onChange:t}){return(0,a.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:String(e),onChange:e=>t("true"===e.target.value),children:[a.jsx("option",{value:"false",children:"No"}),a.jsx("option",{value:"true",children:"Yes"})]})}let x=e=>"number"==typeof e&&isFinite(e)?e:0;function g({value:e,onChange:t,onNext:s,onBack:l}){(0,n.useId)();let r=(s,a)=>t({...e,[s]:a});return(0,a.jsxs)("section",{className:"rounded border p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Step 2 — Cash flow & income"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ballpark is fine. This powers tax and savings recommendations."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx(b,{label:"Salary (W-2) – yearly",val:x(e.salary),set:e=>r("salary",e)}),a.jsx(b,{label:"Bonus – yearly",val:x(e.bonus),set:e=>r("bonus",e)}),a.jsx(b,{label:"Self-employment net – yearly",val:x(e.selfEmployment),set:e=>r("selfEmployment",e)}),a.jsx(b,{label:"RSU vesting – yearly",val:x(e.rsuVesting),set:e=>r("rsuVesting",e)}),a.jsx(b,{label:"K-1 ordinary (active) – yearly",val:x(e.k1Active),set:e=>r("k1Active",e)}),a.jsx(b,{label:"K-1 ordinary (passive) – yearly",val:x(e.k1Passive),set:e=>r("k1Passive",e)}),a.jsx(b,{label:"Rental NOI – yearly",val:x(e.rentNOI),set:e=>r("rentNOI",e)}),a.jsx(b,{label:"Other income – yearly",val:x(e.otherIncome),set:e=>r("otherIncome",e)})]}),a.jsx("h3",{className:"font-medium mt-6 mb-2",children:"Monthly spending & savings"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx(b,{label:"Fixed expenses / mo",val:x(e.fixedMonthlySpend),set:e=>r("fixedMonthlySpend",e)}),a.jsx(b,{label:"Lifestyle extras / mo",val:x(e.lifestyleMonthlySpend),set:e=>r("lifestyleMonthlySpend",e)}),a.jsx(b,{label:"Savings already / mo",val:x(e.savingsMonthly),set:e=>r("savingsMonthly",e)})]}),a.jsx(y,{onBack:l,onNext:s})]})}function b({label:e,val:t,set:s}){return(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm mb-1",children:e}),a.jsx("input",{type:"number",inputMode:"decimal",className:"w-full border rounded px-3 py-2",value:x(t),onChange:e=>{let t=parseFloat(e.target.value||"0");s(isFinite(t)?t:0)}})]})}function y({onBack:e,onNext:t}){return(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[a.jsx("button",{type:"button",onClick:e,className:"rounded border px-3 py-2",children:"Back"}),a.jsx("button",{type:"button",onClick:t,className:"rounded bg-black text-white px-4 py-2",children:"Continue"})]})}let j=e=>"number"==typeof e&&isFinite(e)?Number(e):0;function f({value:e,onChange:t,onNext:s,onBack:n}){let l=(s,a)=>t({...e,[s]:a}),r=(t,s)=>{l("properties",e.properties.map(e=>e.id===t?{...e,...s}:e))},i=t=>{l("properties",e.properties.filter(e=>e.id!==t))},o=e.properties.reduce((e,t)=>e+(j(t.estimatedValue)-j(t.mortgageBalance)),0),d=j(e.alts?.privateEquityVC)+j(e.alts?.collectibles)+j(e.alts?.other);return(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Balance Sheet"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsx(v,{label:"Cash (HYSA)",v:e.cash,set:e=>l("cash",e)}),a.jsx(v,{label:"Brokerage (taxable)",v:e.brokerage,set:e=>l("brokerage",e)}),a.jsx(v,{label:"Retirement (401k/IRA/Roth)",v:e.retirement,set:e=>l("retirement",e)}),a.jsx(v,{label:"HSA",v:e.hsa,set:e=>l("hsa",e)}),a.jsx(v,{label:"Crypto",v:e.crypto,set:e=>l("crypto",e)})]}),(0,a.jsxs)("div",{className:"rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3",children:[a.jsx("div",{className:"font-medium",children:"Properties & Real Estate"}),a.jsx("button",{type:"button",onClick:()=>{let t={id:String(Date.now()),nickname:"",use:"primary_home",estimatedValue:0,mortgageBalance:0,interestRate:void 0,monthlyRent:void 0,monthlyCosts:void 0,state:""};l("properties",[...e.properties,t])},className:"px-3 py-1 rounded border hover:bg-gray-50 text-sm",children:"+ Add property"})]}),a.jsx("div",{className:"border-t",children:0===e.properties.length?a.jsx("div",{className:"p-3 text-sm text-gray-600",children:"No properties yet. Add your home, rentals, or land."}):(0,a.jsxs)("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"[&>th]:px-3 [&>th]:py-2 text-left",children:[a.jsx("th",{children:"Nickname"}),a.jsx("th",{children:"Use"}),a.jsx("th",{children:"State"}),a.jsx("th",{children:"Est. value"}),a.jsx("th",{children:"Mortgage bal."}),a.jsx("th",{children:"Rate"}),a.jsx("th",{children:"Rent/mo"}),a.jsx("th",{children:"Costs/mo"}),a.jsx("th",{children:"Equity"}),a.jsx("th",{})]})}),(0,a.jsxs)("tbody",{children:[e.properties.map(e=>{let t=j(e.estimatedValue)-j(e.mortgageBalance);return(0,a.jsxs)("tr",{className:"[&>td]:px-3 [&>td]:py-2 border-t",children:[a.jsx("td",{children:a.jsx("input",{className:"border rounded px-2 py-1 w-40",value:e.nickname??"",onChange:t=>r(e.id,{nickname:t.target.value})})}),a.jsx("td",{children:(0,a.jsxs)("select",{className:"border rounded px-2 py-1",value:e.use,onChange:t=>r(e.id,{use:t.target.value}),children:[a.jsx("option",{value:"primary_home",children:"Primary"}),a.jsx("option",{value:"second_home",children:"Second home"}),a.jsx("option",{value:"rental",children:"Rental"}),a.jsx("option",{value:"land",children:"Land"})]})}),a.jsx("td",{children:a.jsx("input",{className:"border rounded px-2 py-1 w-24",placeholder:"e.g., CA",value:e.state??"",onChange:t=>r(e.id,{state:t.target.value})})}),a.jsx("td",{children:a.jsx(N,{value:e.estimatedValue,onChange:t=>r(e.id,{estimatedValue:t})})}),a.jsx("td",{children:a.jsx(N,{value:e.mortgageBalance,onChange:t=>r(e.id,{mortgageBalance:t})})}),a.jsx("td",{children:a.jsx(N,{value:e.interestRate??0,onChange:t=>r(e.id,{interestRate:t})})}),a.jsx("td",{children:a.jsx(N,{value:e.monthlyRent??0,onChange:t=>r(e.id,{monthlyRent:t})})}),a.jsx("td",{children:a.jsx(N,{value:e.monthlyCosts??0,onChange:t=>r(e.id,{monthlyCosts:t})})}),a.jsx("td",{children:k(t)}),a.jsx("td",{children:a.jsx("button",{type:"button",onClick:()=>i(e.id),className:"text-red-600 hover:underline",children:"Remove"})})]},e.id)}),(0,a.jsxs)("tr",{className:"[&>td]:px-3 [&>td]:py-2 border-t font-medium",children:[a.jsx("td",{colSpan:8,className:"text-right",children:"Total property equity"}),a.jsx("td",{children:k(o)}),a.jsx("td",{})]})]})]})})]}),(0,a.jsxs)("div",{className:"rounded border p-4",children:[a.jsx("div",{className:"font-medium mb-3",children:"Other / Alternative Assets (optional)"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-3 gap-4",children:[a.jsx(v,{label:"Private Equity / VC",v:j(e.alts?.privateEquityVC),set:t=>l("alts",{...e.alts,privateEquityVC:t})}),a.jsx(v,{label:"Collectibles",v:j(e.alts?.collectibles),set:t=>l("alts",{...e.alts,collectibles:t})}),a.jsx(v,{label:"Other",v:j(e.alts?.other),set:t=>l("alts",{...e.alts,other:t})})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["Alt total: ",k(d)]})]}),(0,a.jsxs)("div",{className:"rounded border p-4",children:[a.jsx("div",{className:"font-medium mb-3",children:"Debts (non-property)"}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[a.jsx(v,{label:"Mortgage debt (other, if any)",v:e.mortgageDebt,set:e=>l("mortgageDebt",e)}),a.jsx(v,{label:"Student loans",v:e.studentLoans,set:e=>l("studentLoans",e)}),a.jsx(v,{label:"Auto loans",v:e.autoLoans,set:e=>l("autoLoans",e)}),a.jsx(v,{label:"Credit cards",v:e.creditCards,set:e=>l("creditCards",e)}),a.jsx(v,{label:"Other debt",v:e.otherDebt,set:e=>l("otherDebt",e)})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{type:"button",onClick:n,className:"rounded border px-4 py-2 hover:bg-gray-50",children:"Back"}),a.jsx("button",{type:"button",onClick:s,className:"rounded bg-black text-white px-4 py-2 hover:opacity-90",children:"Next"})]})]})}function v({label:e,v:t,set:s}){return(0,a.jsxs)("label",{className:"text-sm block",children:[a.jsx("span",{className:"block text-[12px] text-gray-600 mb-1",children:e}),a.jsx("input",{type:"number",className:"w-full border rounded px-2 py-1",value:Number.isFinite(t)?t:0,onChange:e=>s(parseFloat(e.target.value||"0"))})]})}function N({value:e,onChange:t}){return a.jsx("input",{type:"number",className:"w-28 border rounded px-2 py-1",value:Number.isFinite(e)?e:0,onChange:e=>t(parseFloat(e.target.value||"0"))})}function k(e){return e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}let C=["AL","AK","AZ","AR","CA","CO","CT","DC","DE","FL","GA","HI","IA","ID","IL","IN","KS","KY","LA","MA","MD","ME","MI","MN","MO","MS","MT","NC","ND","NE","NH","NJ","NM","NV","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VA","VT","WA","WI","WV","WY"];function S({value:e,onChange:t,onNext:s,onBack:n}){let l=(s,a)=>t({...e,[s]:a});return(0,a.jsxs)("section",{className:"rounded border p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Step 4 — Taxes (just the essentials)"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"No SSNs or filings needed—just planning inputs."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm mb-1",children:"Filing status"}),(0,a.jsxs)("select",{className:"w-full border rounded px-3 py-2",value:e.filingStatus,onChange:e=>l("filingStatus",e.target.value),children:[a.jsx("option",{value:"single",children:"Single"}),a.jsx("option",{value:"married_joint",children:"Married filing jointly"}),a.jsx("option",{value:"married_separate",children:"Married filing separately"}),a.jsx("option",{value:"head",children:"Head of household"})]})]}),(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm mb-1",children:"State"}),a.jsx("select",{className:"w-full border rounded px-3 py-2",value:e.state,onChange:e=>l("state",e.target.value),children:C.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsx(w,{label:"Likely to itemize deductions",v:e.itemizeLikely,set:e=>l("itemizeLikely",e)}),a.jsx(w,{label:"Charitable giving likely this year",v:e.charitableInclination,set:e=>l("charitableInclination",e)}),a.jsx(w,{label:"Have side-biz or consider entity optimization",v:e.entityOrSideBiz,set:e=>l("entityOrSideBiz",e)})]}),a.jsx(M,{onBack:n,onNext:s})]})}function w({label:e,v:t,set:s}){return(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:e=>s(e.target.checked)}),a.jsx("span",{children:e})]})}function M({onBack:e,onNext:t}){return(0,a.jsxs)("div",{className:"mt-6 flex justify-between",children:[a.jsx("button",{type:"button",className:"rounded border px-3 py-2",onClick:e,children:"Back"}),a.jsx("button",{type:"button",className:"rounded bg-black text-white px-4 py-2",onClick:t,children:"Continue"})]})}let R=e=>"number"==typeof e&&isFinite(e)?e:0;function A({value:e,onChange:t,onNext:s,onBack:n}){let l=(s,a)=>t({...e,[s]:a});return(0,a.jsxs)("section",{className:"rounded border p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Step 5 — Retirement & wealth building"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx(D,{label:"Target retire age",v:R(e.targetRetireAge),set:e=>l("targetRetireAge",e)}),a.jsx(D,{label:"Desired retirement income / mo",v:R(e.targetRetireIncomeMonthly),set:e=>l("targetRetireIncomeMonthly",e)}),a.jsx(T,{label:"Using backdoor Roth",v:e.usingRothBackdoor,set:e=>l("usingRothBackdoor",e)}),a.jsx(T,{label:"Using mega backdoor Roth",v:e.usingMegaBackdoor,set:e=>l("usingMegaBackdoor",e)}),a.jsx(T,{label:"Have pension or deferred comp",v:e.hasPensionOrDeferredComp,set:e=>l("hasPensionOrDeferredComp",e)})]}),a.jsx(P,{onBack:n,onNext:s})]})}function D({label:e,v:t,set:s}){return(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm mb-1",children:e}),a.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:R(t),onChange:e=>{let t=parseFloat(e.target.value||"0");s(isFinite(t)?t:0)}})]})}function T({label:e,v:t,set:s}){return(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:e=>s(e.target.checked)}),a.jsx("span",{children:e})]})}function P({onBack:e,onNext:t}){return(0,a.jsxs)("div",{className:"mt-6 flex justify-between",children:[a.jsx("button",{type:"button",className:"rounded border px-3 py-2",onClick:e,children:"Back"}),a.jsx("button",{type:"button",className:"rounded bg-black text-white px-4 py-2",onClick:t,children:"Continue"})]})}function I({value:e,onChange:t,onNext:s,onBack:n}){let l=(s,a)=>t({...e,[s]:a});return(0,a.jsxs)("section",{className:"rounded border p-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Step 6 — Risk & protection"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsx(F,{label:"Emergency fund (months)",v:e.emergencyFundMonths,set:e=>l("emergencyFundMonths",e)}),a.jsx(L,{label:"Term life insurance in place",v:e.hasTermLife,set:e=>l("hasTermLife",e)}),a.jsx(L,{label:"Long-term disability insurance",v:e.hasDisability,set:e=>l("hasDisability",e)}),a.jsx(L,{label:"Umbrella liability policy",v:e.hasUmbrella,set:e=>l("hasUmbrella",e)}),a.jsx(L,{label:"Concentration risk (single stock/asset)",v:e.concentrationRisk,set:e=>l("concentrationRisk",e)})]}),a.jsx(E,{onBack:n,onNext:s})]})}function F({label:e,v:t,set:s}){return(0,a.jsxs)("label",{className:"block",children:[a.jsx("span",{className:"block text-sm mb-1",children:e}),a.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:t||0,onChange:e=>s(parseFloat(e.target.value||"0"))})]})}function L({label:e,v:t,set:s}){return(0,a.jsxs)("label",{className:"inline-flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:e=>s(e.target.checked)}),a.jsx("span",{children:e})]})}function E({onBack:e,onNext:t}){return(0,a.jsxs)("div",{className:"mt-6 flex justify-between",children:[a.jsx("button",{type:"button",className:"rounded border px-3 py-2",onClick:e,children:"Back"}),a.jsx("button",{type:"button",className:"rounded bg-black text-white px-4 py-2",onClick:t,children:"Continue"})]})}let $=e=>"number"==typeof e&&isFinite(e)?e:0,B=(...e)=>e.reduce((e,t)=>e+$(t),0),O=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}),V={single:14600,married_joint:29200,married_separate:14600,head:21900};function U(e){let t=B(e.salary,e.bonus,e.selfEmployment,e.rsuVesting,e.k1Active,e.k1Passive,e.otherIncome,e.rentNOI),s=12*$(e.fixedMonthlySpend)+12*$(e.lifestyleMonthlySpend),a=Math.max(0,t-s),n=(e.properties||[]).reduce((e,t)=>e+($(t.estimatedValue)-$(t.mortgageBalance)),0),l=$(e.alts?.privateEquityVC)+$(e.alts?.collectibles)+$(e.alts?.other),r=B(e.cash,e.brokerage,e.retirement,e.hsa,e.crypto,n,l),i=B(e.mortgageDebt,e.studentLoans,e.autoLoans,e.creditCards,e.otherDebt),o=Math.max(3,$(e.emergencyFundMonths)),d=Math.max(1e3,$(e.fixedMonthlySpend)+$(e.lifestyleMonthlySpend)),c=d*o,u=d>0?$(e.cash)/d:0,h=c>0?Math.min(100,$(e.cash)/c*100):0;return{grossIncome:t,spendAnnual:s,impliedSavings:a,savingsRate:t>0?a/t*100:0,totalAssets:r,totalDebts:i,netWorth:r-i,ef:{targetEFMonths:o,monthlyBurn:d,efTarget:c,efCoverageMonths:u,efPct:h}}}function q(e){let t=e.discovery||{},s=(Array.isArray(e.goals5y)?e.goals5y:t.goals5)||[],a=(Array.isArray(e.goals20y)?e.goals20y:t.goals20)||[],n=e.freedomDef??t.freedom??"",l=Number.isFinite(e.confidence)?e.confidence:t.confidence??5,{grossIncome:r,spendAnnual:i,impliedSavings:o,savingsRate:d,netWorth:c}=U(e),u=V[e.filingStatus]??V.single,h=!!e.itemizeLikely,m=r>23e4&&"married_joint"===e.filingStatus||r>146e3&&"married_joint"!==e.filingStatus,p=[l>=8?"You’re confident—lean into compounding, while covering tail risks.":l<=4?"Since confidence is lower, bias to liquidity and resilience as we build momentum.":"Solid. We’ll balance growth with safety and cash flexibility.",`Snapshot: income ${O(r)}/yr; spend ${O(i)}/yr ⇒ implied savings ${O(o)} (${Math.round(d)}%). Net worth ${O(c)}.`],{ef:x}=U(e),g=Math.max(0,x.efTarget-$(e.cash));if(g>0?p.push(`Raise emergency fund to ~${x.targetEFMonths} months (${O(x.efTarget)}). Autotransfer ~${O(Math.ceil(g/12))}/mo to HYSA/T-bills.`):p.push(`Emergency fund ok (~${x.targetEFMonths} months). Keep it in HYSA/T-bill ladder for yield without losing liquidity.`),d<20){let e=Math.ceil((.2*r-o)/12);p.push(e>0?`Increase savings rate toward 20–30%: bump automated transfers by ~${O(e)}/mo (pay-yourself-first).`:`Increase savings rate toward 20–30% via automatic bumps after raises/bonuses.`)}else d>=30&&p.push(`Excellent savings discipline (~${Math.round(d)}%). Set a 1% auto-increase each year.`);let b=Math.max(0,23e3-Math.min(23e3,$(e.retirement)));if(b>0&&p.push(`If not already maxing, target employee 401(k) limit (~${O(23e3)}). Increase payroll deferrals by ~${O(Math.ceil(b/12))}/mo.`),p.push("Max tax-advantaged space: 401(k)/403(b), IRA/backdoor Roth (if needed), HSA if eligible."),m&&!e.usingRothBackdoor&&p.push("Income likely above direct Roth limits; consider a backdoor Roth (watch the pro-rata rule)."),e.usingMegaBackdoor&&p.push(`Using a mega-backdoor Roth—great. Confirm plan rules and avoid after-tax leakage.`),$(e.rsuVesting)>0){let t=.12999999999999998*$(e.rsuVesting);p.push(t>0?`RSUs: plans often withhold ~${Math.round(22)}%. At your bracket, set aside ~${O(t)} more across vests. Consider 10b5-1 and diversify concentration.`:"RSUs: verify withholding and consider a 10b5-1/diversify plan to manage risk and taxes.")}if(e.creditCards>0&&p.push("Attack credit cards first (avalanche). Automate extra above minimums until paid off."),e.studentLoans+e.autoLoans>0&&p.push("After high-interest debt, target student/auto loans while keeping retirement contributions on track."),p.push("If mortgage rate > your safe after-tax yield, add modest extra principal payments after savings goals are met."),(h||e.charitableInclination)&&p.push(`Itemized vs standard: compare to ~${O(u)} annually (SALT cap applies). Consider charitable “bunching” or a DAF in high-income years.`),e.hasDisability||p.push("Add long-term disability insurance (top income-protection priority)."),e.hasTermLife||p.push(`If others rely on your income, add term life (often 20–30\xd7 annual expenses).`),e.hasUmbrella||p.push(`Add a $1–$2M umbrella liability policy; it’s inexpensive and high impact.`),e.concentrationRisk&&p.push("Reduce concentration risk via target weights and scheduled auto-sells on any excess."),e.targetRetireIncomeMonthly>0){let t=12*$(e.targetRetireIncomeMonthly);p.push(`Retirement income target ~${O(t)}/yr ⇒ long-run portfolio ~${O(t/.04)} (4% proxy). Adjust for pensions, rentals, or early retirement.`)}e.hasWillOrTrust?p.push(`Review will/trust every 3–5 years and after major life events. Add POA/healthcare directives.`):p.push("Create a will and (if appropriate) a revocable living trust. Add POA/healthcare directives.");let y=s.filter(Boolean).slice(0,3),j=a.filter(Boolean).slice(0,3);return y.length&&p.push(`Near-term goals: ${y.join(" \xb7 ")}.`),j.length&&p.push(`Long-term goals: ${j.join(" \xb7 ")}.`),n&&p.push(`“Financial freedom” (your words): ${n}`),p.push("Set a 12-month roadmap: automate transfers, schedule quarterly reviews, and rebalance annually."),p}let H=e=>"number"==typeof e&&isFinite(e)?e:0;function Y({value:e,onChange:t}){let[s,l]=n.useState({}),r={...e,...s},i=(s,a)=>{l(e=>({...e,[s]:a})),t&&t({...e,[s]:a})},o=n.useMemo(()=>{let e=q(r);return Array.isArray(e)?e.filter(Boolean):[]},[r]);return(0,a.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"What-If (quick tweaks)"}),Object.keys(s).length>0&&a.jsx("button",{type:"button",onClick:()=>l({}),className:"text-xs underline text-gray-600 hover:text-gray-800",children:"Reset"})]}),a.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"Adjust a few levers and see the plan update instantly. These don’t overwrite your saved inputs unless you’re on the main steps."}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(_,{label:"Salary ($/yr)",children:a.jsx(W,{value:H(r.salary),onChange:e=>i("salary",e)})}),a.jsx(_,{label:"Bonus ($/yr)",children:a.jsx(W,{value:H(r.bonus),onChange:e=>i("bonus",e)})}),a.jsx(_,{label:"RSU vesting ($/yr)",children:a.jsx(W,{value:H(r.rsuVesting),onChange:e=>i("rsuVesting",e)})}),a.jsx(_,{label:"Rent NOI ($/yr)",children:a.jsx(W,{value:H(r.rentNOI),onChange:e=>i("rentNOI",e)})}),a.jsx(_,{label:"Fixed spend ($/mo)",children:a.jsx(W,{value:H(r.fixedMonthlySpend),onChange:e=>i("fixedMonthlySpend",e)})}),a.jsx(_,{label:"Lifestyle spend ($/mo)",children:a.jsx(W,{value:r.lifestyleMonthlySpend,onChange:e=>i("lifestyleMonthlySpend",e)})}),a.jsx(_,{label:"Cash / HYSA ($)",children:a.jsx(W,{value:r.cash,onChange:e=>i("cash",e)})}),a.jsx(_,{label:"Retirement (401k/IRA) ($)",children:a.jsx(W,{value:r.retirement,onChange:e=>i("retirement",e)})})]}),a.jsx("div",{className:"mt-4",children:(0,a.jsxs)("details",{children:[a.jsx("summary",{className:"cursor-pointer text-sm underline",children:"Previewed recommendations"}),0===o.length?a.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"No changes reflected yet."}):a.jsx("ul",{className:"list-disc ml-5 mt-2 space-y-1 text-sm",children:o.map((e,t)=>a.jsx("li",{children:e},t))})]})})]})}function _({label:e,children:t}){return(0,a.jsxs)("label",{className:"block text-sm",children:[a.jsx("span",{className:"block text-[12px] text-gray-600 mb-1",children:e}),t]})}function W({value:e,onChange:t,step:s=100}){return a.jsx("input",{type:"number",inputMode:"decimal",className:"w-full border rounded px-2 py-1",min:0,step:s,value:H(e),onChange:e=>{let s=Number(e.target.value);t(Number.isFinite(s)?s:0)}})}function G({input:e,className:t=""}){let[s,l]=n.useState(!1),[r,i]=n.useState(!1),[o,d]=n.useState(""),c=async()=>{i(!0);try{let t=await fetch("/api/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e,wantNarrative:!0})}),s=await t.json();d(s?.narrative||"No narrative available."),l(!0)}finally{i(!1)}};return(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{type:"button",className:`inline-flex items-center px-3 py-2 rounded border hover:bg-gray-50 ${t}`,onClick:c,disabled:r,children:r?"Generating…":"View Narrative Summary"}),s&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:()=>l(!1)}),(0,a.jsxs)("div",{className:"relative max-w-3xl w-[92vw] bg-white rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-lg",children:"Narrative Summary"}),a.jsx("button",{onClick:()=>l(!1),className:"text-gray-600 hover:opacity-80",children:"✕"})]}),a.jsx("div",{className:"prose max-w-none text-sm whitespace-pre-wrap",children:o})]})]})]})}let z=e=>"number"==typeof e&&isFinite(e)?e:0,K=e=>`${e}-${Math.random().toString(36).slice(2,9)}`,X=e=>Math.max(0,Math.min(1,e));function J(e,t,s){let a=e;return"High"===t&&(a-=.5),"Low"===t&&(a+=.5),"High"===s&&(a+=.5),"Low"===s&&(a-=.25),Math.max(1,Math.min(5,Math.round(a)))}let Q=e=>"number"==typeof e&&isFinite(e)?e:0,Z=(...e)=>e.reduce((e,t)=>e+Q(t),0),ee=e=>e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0});function et({value:e,onBack:t}){let s=Z(e.salary,e.bonus,e.selfEmployment,e.rsuVesting,e.k1Active,e.k1Passive,e.otherIncome,e.rentNOI),l=12*Q(e.fixedMonthlySpend)+12*Q(e.lifestyleMonthlySpend),r=Math.max(0,s-l),i=s>0?r/s*100:0,o=(e.properties||[]).reduce((e,t)=>e+(Q(t.estimatedValue)-Q(t.mortgageBalance)),0),d=Q(e.alts?.privateEquityVC)+Q(e.alts?.collectibles)+Q(e.alts?.other),c=Z(e.cash,e.brokerage,e.retirement,e.hsa,e.crypto,o,d),u=Z(e.mortgageDebt,e.studentLoans,e.autoLoans,e.creditCards,e.otherDebt),h=Math.max(3,Q(e.emergencyFundMonths)),m=Math.max(1e3,Q(e.fixedMonthlySpend)+Q(e.lifestyleMonthlySpend)),p=m*h,x=m>0?Q(e.cash)/m:0,g=p>0?Math.min(100,Q(e.cash)/p*100):0,b=n.useMemo(()=>q(e),[e]),y={cash:[],invest:[],debt:[],risk:[],tax:[],estate:[],goals:[],other:[]};b.forEach(e=>{let t=e.toLowerCase();/(emergency|hysa|t-?bill|cash)/.test(t)?y.cash.push(e):/(401|ira|roth|invest|portfolio|rebalance|diversif)/.test(t)?y.invest.push(e):/(debt|credit card|loan|mortgage|principal)/.test(t)?y.debt.push(e):/(disability|term life|umbrella|insurance|risk)/.test(t)?y.risk.push(e):/(tax|charit|itemiz|da?f|withhold)/.test(t)?y.tax.push(e):/(will|trust|estate|inherit)/.test(t)?y.estate.push(e):/(goal|freedom|roadmap)/.test(t)?y.goals.push(e):y.other.push(e)});let j=n.useMemo(()=>b.map(e=>{let t=e.toLowerCase(),s=0;return/increase emergency fund|credit card|under-?withhold|umbrella|disability/.test(t)&&(s+=3),/max|backdoor|roth|mega/.test(t)&&(s+=2),/snapshot|implied savings/.test(t)&&(s+=1),/consider/.test(t)&&(s-=.5),{r:e,score:s}}).sort((e,t)=>t.score-e.score).slice(0,3).map(e=>e.r),[b]),f=n.useMemo(()=>(function(e){let t=Object.fromEntries([function(e){let t=Math.max(1e3,z(e.fixedMonthlySpend)+z(e.lifestyleMonthlySpend)),s=Math.max(3,z(e.emergencyFundMonths)),a=Math.max(0,t*s-z(e.cash));return{id:"emergencyFund",label:"Emergency fund gap",inputs:{monthlyBurn:t,monthsTarget:s,cash:z(e.cash)},result:a,note:"Target cash cushion to cover essential spending without selling investments at a bad time."}}(e),function(e){let t=z(e.rsuVesting);return t<=0?{id:"rsuWithholdingGap",label:"RSU withholding gap",inputs:{rsuYear:t},result:0,note:"No RSU vests expected this year."}:{id:"rsuWithholdingGap",label:"RSU withholding gap",inputs:{rsuYear:t,defaultWH:.22,plausibleRate:.35},result:.12999999999999998*t,note:"Plans often under-withhold on RSU vests vs. your true marginal rate."}}(e),function(e){let t=[e.salary,e.bonus,e.selfEmployment,e.rsuVesting,e.k1Active,e.k1Passive,e.otherIncome,e.rentNOI].map(z).reduce((e,t)=>e+t,0),s=(z(e.fixedMonthlySpend)+z(e.lifestyleMonthlySpend))*12,a=Math.max(0,t-s);return{id:"savingsRate",label:"Savings rate",inputs:{income:t,spend:s,implied:a},result:t>0?a/t:0,note:"Rule-of-thumb target is 20–30% for high earners; higher if retiring early."}}(e)].map(e=>[e.id,e])),s=[...function(e,t){let s=t.emergencyFund?.result;return!s||s<=0?[]:[{id:K("cash-ef"),title:`Auto-move ~$${Math.ceil(s/12).toLocaleString()} / mo to HYSA/T-bills until cushion reached`,bucket:"Cash",priority:J(2,"High","Low"),timeframe:"This month",effort:"Low",impact:"High",rationale:"Build resilience so market dips or job risk dont force selling assets.",calcRefs:["emergencyFund"],estDollars:{oneTimeCostOrFunding:s},links:[{label:"Where to find: bank balance + monthly spend",href:"#"}],toggles:["Pay-yourself-first"]}]}(0,t),...function(e,t){let s=t.rsuWithholdingGap?.result;return!s||s<=0?[]:[{id:K("tax-rsu"),title:`Increase tax set-aside for RSU vests by ~$${Math.round(s/4).toLocaleString()} per vest`,bucket:"Taxes",priority:J(3,"High","Low"),timeframe:"This quarter",effort:"Low",impact:"High",rationale:"Avoid April surprise from under-withheld supplemental wages.",calcRefs:["rsuWithholdingGap"],estDollars:{annualTaxSavings:0,oneTimeCostOrFunding:s},links:[{label:"Where to find: vesting schedule & paystubs",href:"#"}],toggles:["Assume 35% marginal vs 22% withheld"]},{id:K("invest-concentration"),title:"Set a 10b5-1 or scheduled auto-sell to manage concentration",bucket:"Investing",priority:J(3,"Medium","Medium"),timeframe:"This quarter",effort:"Medium",impact:"Medium",rationale:"Reduce single-stock risk while staying disciplined.",calcRefs:["rsuWithholdingGap"]}]}(0,t),...function(e,t){let s=X(t.savingsRate?.result??0);if(s>=.2)return[];let a=Math.ceil((.2-s)*(t.savingsRate?.inputs?.income??0)/12);return[{id:K("cash-savingsrate"),title:`Raise auto-transfers by ~$${a.toLocaleString()} / mo to hit 20% savings`,bucket:"Cash",priority:J(2,"High","Low"),timeframe:"This month",effort:"Low",impact:"High",rationale:"Pay-yourself-first enforces the plan without decision fatigue.",calcRefs:["savingsRate"],estDollars:{annualCashFlowChange:12*a}}]}(0,t),{id:K("invest-401k"),title:"Confirm 401(k) deferral will reach the annual employee limit",bucket:"Investing",priority:J(3,"Medium","Low"),timeframe:"This month",effort:"Low",impact:"Medium",rationale:"Shelter more income; adjust payroll % after raises/bonuses.",links:[{label:"Where to find: benefits portal > contributions",href:"#"}]}];s=s.map(e=>({...e,priority:J(3,e.impact,e.effort)}));let a={"This week":0,"This month":1,"This quarter":2,"This year":3};s.sort((e,t)=>e.priority-t.priority||a[e.timeframe]-a[t.timeframe]);let n={"This week":[],"This month":[],"This quarter":[],"This year":[]};for(let e of s){let t=n[e.timeframe];t.length<5&&t.push(e)}let l={},r=[];for(let e of["This week","This month","This quarter","This year"]){let t=n[e].map(e=>(l[e.id]=e,e.id));t.length&&r.push({title:e,actions:t})}return{generatedAt:new Date().toISOString(),actions:l,checklists:r,traces:t}})(e),[e]),{weekActions:v,monthActions:N,quarterActions:k}=n.useMemo(()=>{let e=[],t=[],s=[];y.cash.length&&(e.push("Open/confirm HYSA or T-bill account"),e.push("Set up auto-transfer on payday for emergency fund"),t.push("Validate emergency fund target and adjust transfer amount")),y.tax.length&&(e.push("Turn on paycheck “additional withholding” or RSU tax set-aside"),t.push("Run itemized vs standard deduction check for this year"),s.push("Quarterly: review RSU withholding set-aside vs vests")),y.invest.length&&(e.push("Set target allocation and auto-invest schedule"),t.push("Enroll 1% annual auto-increase on 401(k) deferral"),s.push("Rebalance and harvest losses/gains as appropriate")),y.debt.length&&(e.push("List all debts with APR and minimums"),t.push("Start avalanche payments on highest-APR debt"),s.push("If mortgage & cash allow, add small extra principal monthly")),y.risk.length&&(e.push("Get quotes: disability, term life, umbrella"),t.push("Bind umbrella policy ($1–2M)")),y.estate.length&&(e.push("List beneficiaries on 401k/IRA/HSA and life insurance"),t.push("Schedule will/trust consult; add POA/health directives"));let a=(e,t)=>Array.from(new Set(e)).slice(0,t);return{weekActions:a(e,5),monthActions:a(t,6),quarterActions:a(s,6)}},[y]);return(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"rounded-lg border p-4 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Review & Finalize"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Here’s a first pass of your plan. Tweak inputs on the right—numbers and recommendations update live. You can generate a written narrative any time."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap gap-2 text-sm",children:[(0,a.jsxs)(es,{children:["Income ",ee(s),"/yr"]}),(0,a.jsxs)(es,{children:["Spend ",ee(l),"/yr"]}),(0,a.jsxs)(es,{children:["Savings ",ee(r)," (",Math.round(i),"%)"]}),(0,a.jsxs)(es,{children:["Net worth ",ee(c-u)]})]}),(0,a.jsxs)("div",{className:"mt-4 grid sm:grid-cols-2 gap-4",children:[a.jsx(ea,{label:"Emergency Fund Coverage",hint:`${Math.max(0,Math.floor(x))} / ${h} months`,percent:g}),a.jsx(ea,{label:"Savings Rate",hint:`${Math.round(i)}% (target 20–30%)`,percent:Math.max(0,Math.min(100,i))})]})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:"Your Action Plan"}),a.jsx(G,{input:e,className:"text-sm underline px-2 py-1 rounded hover:bg-gray-50"})]}),f?.flags?.length?a.jsx("div",{className:"mt-2 text-sm text-amber-700",children:f.flags.map((e,t)=>(0,a.jsxs)("div",{children:["• ",e]},t))}):null,a.jsx("div",{className:"mt-4 grid md:grid-cols-2 gap-4",children:f?.checklists?.map(e=>a.jsxs("div",{className:"rounded border p-3",children:[a.jsx("div",{className:"font-medium mb-2",children:e.title}),a.jsx("ul",{className:"space-y-2",children:e.actions.map(e=>{let t=f.actions[e];return t?a.jsxs("li",{className:"text-sm",children:[a.jsx("div",{className:"font-medium",children:t.title}),a.jsxs("div",{className:"text-gray-600",children:[a.jsxs("span",{className:"mr-2",children:["Impact: ",t.impact]}),a.jsxs("span",{className:"mr-2",children:["Effort: ",t.effort]}),a.jsxs("span",{children:["Bucket: ",t.bucket]})]}),t.estDollars&&a.jsxs("div",{className:"text-gray-600",children:[t.estDollars.annualTaxSavings?`Est. tax save: $${t.estDollars.annualTaxSavings.toLocaleString()} `:"",t.estDollars.annualCashFlowChange?`Cash flow: $${t.estDollars.annualCashFlowChange.toLocaleString()}/yr `:"",t.estDollars.oneTimeCostOrFunding?`Funding: $${t.estDollars.oneTimeCostOrFunding.toLocaleString()} `:""]}),a.jsx("div",{className:"text-gray-700 mt-1",children:t.rationale}),t.calcRefs?.length?a.jsxs("details",{className:"mt-1",children:[a.jsx("summary",{className:"cursor-pointer text-xs underline",children:"Why this?"}),a.jsx("div",{className:"mt-1 text-xs text-gray-700 space-y-1",children:t.calcRefs.map(e=>{let t=f.traces?.[e];return t?a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:t.label}),t.note&&a.jsx("div",{children:t.note}),"result"in t&&void 0!==t.result&&a.jsxs("div",{children:["Result:"," ","number"==typeof t.result?`$${t.result.toLocaleString()}`:String(t.result)]})]},e):null})})]}):null]},e):null})})]},e.title))})]}),(0,a.jsxs)("div",{className:"rounded-lg border p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"\uD83D\uDE80 Your Top 3 Priorities"}),a.jsx("ol",{className:"list-decimal ml-5 space-y-2",children:j.map((e,t)=>a.jsx("li",{children:e},t))})]}),a.jsx(el,{title:"This Week",items:v.length?v:["Set up HYSA auto-transfer","List debts with APRs","Pick a 401(k) target allocation"]}),a.jsx(el,{title:"Next 30 Days",items:N.length?N:j}),a.jsx(el,{title:"Next 90 Days",items:k.length?k:["Rebalance portfolio","Quarterly: check RSU set-aside vs. vests."]}),a.jsx(en,{title:"\uD83D\uDCB0 Cash & Savings",items:y.cash,defaultOpen:!0}),a.jsx(en,{title:"\uD83D\uDCC8 Investing & Retirement",items:y.invest}),a.jsx(en,{title:"\uD83C\uDFE1 Debt & Real Estate",items:y.debt}),a.jsx(en,{title:"\uD83D\uDEE1️ Risk Protection",items:y.risk}),a.jsx(en,{title:"\uD83E\uDDFE Taxes & Charitable",items:y.tax}),a.jsx(en,{title:"⚖️ Estate & Legacy",items:y.estate}),a.jsx(en,{title:"\uD83C\uDFAF Your Goals",items:y.goals}),y.other.length>0&&a.jsx(en,{title:"\uD83E\uDDE9 Other",items:y.other}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[a.jsx("button",{type:"button",onClick:t,className:"rounded border px-4 py-2 hover:bg-gray-50",children:"Back"}),a.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 rounded bg-black text-white hover:opacity-90",children:"Generate Final Plan"})]})]}),a.jsx("div",{children:a.jsx(Y,{value:e})})]})}function es({children:e}){return a.jsx("span",{className:"inline-flex items-center rounded-full border px-2.5 py-1 text-xs bg-white",children:e})}function ea({label:e,hint:t,percent:s}){return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"font-medium",children:e}),t&&a.jsx("span",{className:"text-gray-600",children:t})]}),a.jsx("div",{className:"h-2 w-full rounded bg-gray-200 overflow-hidden",children:a.jsx("div",{className:"h-2 rounded bg-black transition-all",style:{width:`${Math.max(0,Math.min(100,s))}%`}})})]})}function en({title:e,items:t,defaultOpen:s=!1}){if(!t||0===t.length)return null;let[l,r]=n.useState(s);return(0,a.jsxs)("div",{className:"rounded-lg border mb-3",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>r(e=>!e),className:"w-full px-4 py-3 text-left flex justify-between items-center",children:[a.jsx("span",{className:"font-medium",children:e}),a.jsx("span",{className:"text-gray-500",children:l?"−":"+"})]}),l&&a.jsx("div",{className:"px-5 pb-4",children:a.jsx("ul",{className:"list-disc ml-5 space-y-2",children:t.map((e,t)=>a.jsx("li",{children:e},t))})})]})}function el({title:e,items:t}){return t&&0!==t.length?(0,a.jsxs)("div",{className:"rounded-lg border p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-2",children:e}),a.jsx("ul",{className:"list-disc ml-5 space-y-2",children:t.map((e,t)=>a.jsx("li",{children:e},t))})]}):null}function er(){let[e,t]=(0,n.useState)(l),[s,r]=(0,n.useState)(1),[o,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[m,p]=(0,n.useState)(null),x=()=>r(e=>Math.min(8,e+1)),b=()=>r(e=>Math.max(1,e-1));async function y(t){if(t.preventDefault(),!(s<8)){d(!0),p(null),h(null);try{let t=await fetch("/api/plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(await t.text());let s=await t.json();h(Array.isArray(s?.recommendations)?s.recommendations:[]),requestAnimationFrame(()=>{document.getElementById("results")?.scrollIntoView({behavior:"smooth",block:"start"})})}catch(e){p(e?.message||"Failed to generate plan.")}finally{d(!1)}}}return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Step ",s," of 8"]}),a.jsx("h1",{className:"text-2xl font-semibold",children:"Financial Planner"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"We’ll ask only what’s needed—no sensitive identifiers."})]}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[1===s&&a.jsx(i,{value:e,onChange:t,onNext:x}),2===s&&a.jsx(c,{value:e,onChange:t,onNext:x,onBack:b}),3===s&&a.jsx(g,{value:e,onChange:t,onNext:x,onBack:b}),4===s&&a.jsx(f,{value:e,onChange:t,onNext:x,onBack:b}),5===s&&a.jsx(S,{value:e,onChange:t,onNext:x,onBack:b}),6===s&&a.jsx(A,{value:e,onChange:t,onNext:x,onBack:b}),7===s&&a.jsx(I,{value:e,onChange:t,onNext:x,onBack:b}),8===s&&a.jsx(et,{value:e,onBack:b})]}),o&&a.jsx("p",{className:"mt-6",children:"Generating plan…"}),m&&a.jsx("div",{className:"mt-6 rounded border border-red-300 bg-red-50 p-3 text-red-800",children:m}),u&&(0,a.jsxs)("section",{id:"results",className:"mt-8 rounded border p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Personalized Recommendations"}),0===u.length?a.jsx("p",{children:"No recommendations returned."}):a.jsx("ul",{className:"list-disc pl-5 space-y-2",children:u.map((e,t)=>a.jsx("li",{children:e},t))})]})]})}},7586:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,dynamic:()=>l,revalidate:()=>r});var a=s(9510);let n=(0,s(8570).createProxy)(String.raw`/Users/ianjoachim/Documents/GitHub/MoneyXprt/app/planner/Wizard.tsx#default`),l="force-dynamic",r=0;function i(){return a.jsx(n,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,920,382],()=>s(1302));module.exports=a})();