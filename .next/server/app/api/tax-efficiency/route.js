"use strict";(()=>{var e={};e.id=432,e.ids=[432],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},212:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>T,patchFetch:()=>y,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};a.r(s),a.d(s,{POST:()=>l});var r=a(9303),n=a(8716),i=a(3131),o=a(7070);let u={federal:{brackets:[{threshold:0,rate:.1},{threshold:11600,rate:.12},{threshold:47150,rate:.22},{threshold:100525,rate:.24},{threshold:191950,rate:.32},{threshold:243725,rate:.35},{threshold:609350,rate:.37}],estateExemption:15e6,estateRate:.4,capitalGains:{short:.37,long:.2}},state:{CA:.133,NY:.109,TX:0,FL:0,WY:0}};async function l(e){try{let t=await e.json(),a=await c(t);return o.NextResponse.json({scenarios:a})}catch(e){return console.error("Tax calculation error:",e),o.NextResponse.json({error:"Failed to calculate tax scenarios"},{status:500})}}async function c(e){let t=function(e){let t=e.assets.reduce((e,t)=>{let a=p(t.type);return e+t.value*a},0),a=d(t),s=t*u.state[e.stateResidence],r=x(e.estateSize);return{name:"Current Structure (Baseline)",federalTax:a,stateTax:s,estateTax:r,totalTax:a+s+r,savings:0,strategies:["Current structure without optimization"],assumptions:["Based on 2025 tax rates post-OBBBA","Assumes all income is ordinary income","No special deductions or credits applied"]}}(e),a=function(e,t){let a=e.annualExpenses.fees+e.annualExpenses.donations+e.annualExpenses.other,s=e.assets.reduce((e,t)=>{let a=p(t.type);return e+t.value*a},0)-a,r=d(s),n=s*u.state[e.stateResidence],i=t.estateTax,o=r+n+i,l=t.totalTax-o;return{name:"LLC Structure",federalTax:r,stateTax:n,estateTax:i,totalTax:o,savings:l,strategies:["Business expense deductions","Asset protection","Pass-through taxation"],assumptions:["All expenses qualify as business deductions","LLC properly structured and maintained","Operating agreement in place"]}}(e,t),s=function(e,t){let a=x(.7*e.estateSize),s=t.federalTax+t.stateTax+a,r=t.totalTax-s;return{name:"FLP/Trust Structure",federalTax:t.federalTax,stateTax:t.stateTax,estateTax:a,totalTax:s,savings:r,strategies:["30% valuation discount on estate tax","Asset protection","Generational wealth transfer"],assumptions:["Valid business purpose for FLP","Proper documentation and maintenance","IRS accepts valuation discount"]}}(e,t),r=function(e,t){let a=.05*e.debtPlans.plannedBorrowing,s=.2*e.debtPlans.plannedBorrowing,r=t.federalTax-s,n=r+t.stateTax+t.estateTax+a,i=t.totalTax-n;return{name:"Buy-Borrow-Die Strategy",federalTax:r,stateTax:t.stateTax,estateTax:t.estateTax,totalTax:n,savings:i,strategies:["Leverage appreciated assets","Defer capital gains","Utilize step-up basis"],assumptions:["5% borrowing rate","Assets appreciate faster than borrowing cost","Step-up basis remains in tax code"]}}(e,t),n=function(e,t){let a=Math.min(e.assets.filter(e=>"business"===e.type).reduce((e,t)=>e+t.value,0),1e7),s=t.federalTax-.2*a,r="WY"===e.stateResidence?0:t.stateTax,n=s+r+t.estateTax,i=t.totalTax-n;return{name:"QSBS Strategy",federalTax:s,stateTax:r,estateTax:t.estateTax,totalTax:n,savings:i,strategies:["QSBS $10M gain exclusion","State tax optimization","Early planning for qualification"],assumptions:["Meets QSBS requirements","Within $10M exclusion limit","Proper holding period met"]}}(e,t);return[t,a,s,r,n]}function p(e){switch(e){case"business":return .25;case"real_estate":return .06;case"stocks":return .04;default:return .02}}function d(e){let t=0,a=e;for(let e=0;e<u.federal.brackets.length;e++){let s=u.federal.brackets[e],r=u.federal.brackets[e+1],n=r?Math.min(a,r.threshold-s.threshold):a;if(n<=0)break;t+=n*s.rate,a-=n}return t}function x(e){return Math.max(0,e-u.federal.estateExemption)*u.federal.estateRate}let f=new r.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/tax-efficiency/route",pathname:"/api/tax-efficiency",filename:"route",bundlePath:"app/api/tax-efficiency/route"},resolvedPagePath:"/Users/ianjoachim/Documents/GitHub/MoneyXprt/app/api/tax-efficiency/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:m,serverHooks:g}=f,T="/api/tax-efficiency/route";function y(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[948,972],()=>a(212));module.exports=s})();